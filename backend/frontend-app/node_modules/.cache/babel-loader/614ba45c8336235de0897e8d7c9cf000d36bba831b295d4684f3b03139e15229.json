{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var GlobalContext=/*#__PURE__*/React.createContext();//actions\nvar LOADING='LOADING';var SET_VIDEOS='SET_VIDEOS';var SET_SELECTED_VIDEO='SET_SELECTED_VIDEO';var reducer=function reducer(state,action){switch(action.type){case LOADING:return _objectSpread(_objectSpread({},state),{},{loading:true});case SET_VIDEOS:return _objectSpread(_objectSpread({},state),{},{loading:false,videos:_toConsumableArray(action.payload.map(function(video){return _objectSpread(_objectSpread({},video),{},{videoUrl:\"http://localhost:8000/public/videos/\".concat(video.filename)});}))});default:return state;}return state;};export var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var initialState={videos:[],loading:false};var _React$useReducer=React.useReducer(reducer,initialState),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];//get videos\nvar getAllVideos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:8000/api/videos');case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;dispatch({type:SET_VIDEOS,payload:data.videos});_context.next=12;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function getAllVideos(){return _ref2.apply(this,arguments);};}();useEffect(function(){getAllVideos();},[]);return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{getAllVideos:getAllVideos}),children:children});};export var useGlobalContext=function useGlobalContext(){return React.useContext(GlobalContext);};","map":{"version":3,"names":["React","useEffect","jsx","_jsx","GlobalContext","createContext","LOADING","SET_VIDEOS","SET_SELECTED_VIDEO","reducer","state","action","type","_objectSpread","loading","videos","_toConsumableArray","payload","map","video","videoUrl","concat","filename","GlobalProvider","_ref","children","initialState","_React$useReducer","useReducer","_React$useReducer2","_slicedToArray","dispatch","getAllVideos","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","sent","json","t0","stop","apply","arguments","Provider","value","useGlobalContext","useContext"],"sources":["C:/Users/hp/Downloads/video_player_uploader-master/backend/frontend-app/src/context/global.js"],"sourcesContent":["import React, { useEffect } from \"react\";\n\nconst GlobalContext = React.createContext()\n\n//actions\nconst LOADING = 'LOADING'\nconst SET_VIDEOS = 'SET_VIDEOS'\nconst SET_SELECTED_VIDEO = 'SET_SELECTED_VIDEO'\n\nconst reducer = (state, action) => {\n    switch(action.type){\n        case LOADING:\n            return {...state, loading: true}\n        case SET_VIDEOS:\n            return{\n                ...state,\n                loading: false,\n                videos: [\n                    ...action.payload.map((video) => {\n                        return{\n                            ...video,\n                            videoUrl: `http://localhost:8000/public/videos/${video.filename}`\n                        }\n                    })\n                ]\n            }\n        default:\n            return state\n    }\n\n    return state\n}\n\nexport const GlobalProvider = ({children}) => {\n\n\n    const initialState = {\n        videos: [],\n        loading: false,\n    }\n\n    const [state, dispatch] = React.useReducer(reducer, initialState)\n\n    //get videos\n    const getAllVideos = async () => {\n        try {\n            const res = await fetch('http://localhost:8000/api/videos');\n            const data = await res.json()\n\n            dispatch({type: SET_VIDEOS, payload: data.videos})\n        } catch (error) {\n            \n        }\n    }\n    \n    useEffect(() => {\n        getAllVideos()\n    }, [])\n\n    return (\n        <GlobalContext.Provider value={{\n            ...state,\n            getAllVideos\n        }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}\n\nexport const useGlobalContext = () => {\n    return React.useContext(GlobalContext)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}